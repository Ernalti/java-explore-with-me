package ru.practicum.statdto;

import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import javax.validation.constraints.NotBlank;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Pattern;
import java.time.LocalDateTime;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class StatDto {


	private Long id;

	@NotBlank
	private String app;

	@NotBlank
	private String uri;

	@NotBlank
	@Pattern(regexp = "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$|([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}")
//	@Pattern(regexp = "^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$|^(?:(?:(?:(?:(?:[0-9a-fA-F]){1,4}:){6}|::(?:[0-9a-fA-F]){1,4}:){1,6}((?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?:(?:(?:(?:(?:[0-9a-fA-F]){1,4}:){5}|::(?:[0-9a-fA-F]){1,4}:){1,5}((?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?:(?:(?:(?:(?:[0-9a-fA-F]){1,4}:){4}|::(?:[0-9a-fA-F]){1,4}:){1,4}((?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?:(?:(?:(?:(?:[0-9a-fA-F]){1,4}:){3}|::(?:[0-9a-fA-F]){1,4}:){1,3}((?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?:(?:(?:(?:(?:[0-9a-fA-F]){1,4}:){2}|::(?:[0-9a-fA-F]){1,4}:){1,2}((?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?:(?:(?:(?:(?:[0-9a-fA-F]){1,4}:){1}|::(?:[0-9a-fA-F]){1,4}:){1}((?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?::(?:[0-9a-fA-F]){1,4}:){1,7}(?:(?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4}))|(?:(?::(?:[0-9a-fA-F]){1,4}:){1,6}:(?:(?:(?:25[0-5]|(?:1[0-9]|2[0-4]|3[0-9]|4[0-9]|5[0-5]|6[0-4]|7[0-9]|8[0-9]|9[0-9]|0)(?:\\.[0-9]{1,3}){3}))|(?:(?::[0-9a-fA-F]){1,4})?::(?:[0-9a-fA-F]){1,4})))$")
	private String ip;

	@NotNull
	@JsonProperty("timestamp")
	@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
	private LocalDateTime timestamp;


}
